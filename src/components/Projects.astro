---
import { Button, Icon, IconProps } from "./ui/index.astro";

interface Project {
  title: string;
  description: string;
  cover: {
    sources: {
      small: string;
      medium: string;
      large: string;
    };
    alternativeText: string;
  };
  icons: Array<IconProps["name"]>;
  githubUrl: string;
  demoUrl?: string;
}

/**
 * New projects must be added in this array.
 */
const projects: Project[] = [
  {
    title: "AGENDA",
    description:
      "Have you ever had problems to book any common area in your building? Agenda is the best solution to help you with that!",
    cover: {
      sources: {
        small: "/images/project-agenda-cover-small.jpg",
        medium: "/images/project-agenda-cover-medium.jpg",
        large: "/images/project-agenda-cover-large.jpg",
      },
      alternativeText: "Login page from Agenda application",
    },
    icons: ["html5", "css3", "typescript", "react"],
    githubUrl: "https://github.com/fthomasvp/agenda-granharmonia-web",
  },
];
---

<section id="projects" tabindex="-1">
  <div class="wrapper">
    <h2>Projects</h2>
    <div class="projects__container">
      <div class="projects">
        {
          projects.map((item) => (
            <div class="project">
              <div class="cover">
                <img
                  width="100%"
                  height="100%"
                  loading="lazy"
                  src={item.cover.sources.large}
                  srcset={`${item.cover.sources.small} 290w, ${item.cover.sources.medium} 723w, ${item.cover.sources.large} 1140w`}
                  sizes="(min-width: 1340px) 723px, (min-width: 780px) 55.56vw, calc(100vw - 66px)"
                  alt={item.cover.alternativeText}
                />

                <div class="technologies">
                  <div class="icon">
                    {item.icons.map((name) => (
                      <Icon name={name} />
                    ))}
                  </div>
                </div>
              </div>

              <div class="detail">
                <h3>{item.title}</h3>
                <p class="description">{item.description}</p>
                <div class="actions">
                  {item.demoUrl && (
                    <Button
                      title="Live Demo"
                      href={item.demoUrl}
                      target="_blank"
                      rel="noopener"
                      variant="solid"
                    />
                  )}
                  {item.githubUrl && (
                    <Button
                      title="See on GitHub"
                      href={item.githubUrl}
                      target="_blank"
                      rel="noopener"
                      variant="outline"
                    />
                  )}
                </div>
              </div>
            </div>
          ))
        }
      </div>
    </div>
  </div>
</section>

<style lang="scss">
  @import "../styles/base.scss";

  .projects__container {
    display: flex;

    .projects {
      display: flex;
      flex-direction: column;
      gap: $space-7;

      padding-block: $space-3;

      @media (min-width: $breakpoints-md) {
        gap: 0;
      }

      .project {
        border: 1px solid $colors-black-rich;
        border-radius: $radii-xl;
        padding-inline: $space-3;
        padding-block: $space-3;

        display: flex;
        flex-direction: column;

        @media (min-width: $breakpoints-md) {
          flex-direction: row;

          border: none;
          border-radius: 0;

          padding-inline: 0;
          padding-block: $space-12;

          &:nth-child(even) {
            flex-direction: row-reverse;

            .cover {
              margin-inline-end: 0;
              margin-inline-start: $space-16;
            }
          }
        }

        .cover {
          display: flex;
          flex-direction: column;
          gap: $space-4;

          @media (min-width: $breakpoints-md) {
            flex: 1;

            margin-inline-end: $space-16;
          }

          img {
            max-width: 100%;

            border-radius: $radii-md;
          }

          .technologies {
            display: flex;
            justify-content: center;

            margin-block-end: $space-4;

            @media (min-width: $breakpoints-md) {
              justify-content: center;

              margin-block-end: 0;
            }

            .icon {
              display: flex;
              gap: $space-3;
            }
          }
        }
        .detail {
          display: flex;
          flex-direction: column;
          gap: $space-6;

          h3 {
            margin-block: 0;
          }

          @media (min-width: $breakpoints-md) {
            flex: 0.6;
            justify-content: center;
          }

          .actions {
            display: flex;
            flex-direction: row;
            flex-wrap: wrap;
            gap: 1rem;

            @media (max-width: $breakpoints-sm) {
              flex-direction: column;
            }
          }
        }
      }
    }
  }
</style>
